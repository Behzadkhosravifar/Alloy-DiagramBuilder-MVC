@{
    AjaxOptions opt = new AjaxOptions
    {
        //Confirm = "Are you sure to start search?",
        //LoadingElementDuration = 500,
        // LoadingElementId = "divSaveLoading",
        UpdateTargetId = "divDiagram",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "POST",
        OnSuccess = ""
    };

}

@section scripts{
    @Scripts.Render("~/bundles/alloy")
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/Gridmvc.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/gridmvc.min.js")" type="text/javascript"> </script>

    <script type="text/javascript">
      //  var diagramStore = null;
        $(function () {
            pageGrids.diagramsGrid.onRowSelect(function (e) {
                //if (diagramStore !== null) diagramStore.clearFields(); 
               // $('#alloyDiagramId').val(e.row.DiagramId);
                $("#frmDiagram").submit();
                $.get(window.location.origin + "/api/diagram/GetSavedData", { id: e.row.DiagramId }, function (data) {
                    DiagramDrower('myDiagramContainer', 'myDiagramBuilder', data.nodes, data.connections, data.isReadonly);
                });
            });
        });

    </script>

}

<br />
<br />
<br />
<br />


<div class="row">
    <div class="col-xs-3">
        @Html.Action("GetAlloyDiagramsTable", "Alloy")
    </div>
    <div class="col-xs-9">
        @using (Ajax.BeginForm("GetDiaramView", "Alloy", null, opt, new {id = "frmDiagram"})) // set new Id name for  Form
        {
            @Html.Action("GetDiaramView", "Alloy")
        }
    </div>
</div>
